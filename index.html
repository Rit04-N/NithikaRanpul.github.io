<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Dasini</title>
    <style>
        /* --- THE PINK PALETTE --- */
        :root {
            --bg-dark: #1a050a;
            --bg-card: #2b0a16;
            --primary-pink: #ff4d6d;
            --soft-pink: #ffb3c1;
            --text-main: #fff0f3;
        }

        body { 
            margin: 0; 
            background-color: var(--bg-dark); 
            color: var(--text-main); 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            text-align: center; 
            overflow-x: hidden; 
            user-select: none; 
        }

        /* --- HERO SECTION --- */
        .hero { 
            min-height: 90vh; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            background: linear-gradient(to bottom, rgba(26,5,10,0.8), var(--bg-dark)), 
                        url('https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=1000'); 
            background-size: cover;
            background-position: center;
            position: relative; z-index: 2; 
        }

        h1 { 
            font-size: 3.5rem; 
            margin: 0; 
            background: -webkit-linear-gradient(45deg, var(--soft-pink), var(--primary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0px 0px 20px rgba(255, 77, 109, 0.3);
            padding: 0 15px;
        }

        .countdown { 
            margin-top: 20px;
            font-size: 1.5rem; 
            border: 2px solid var(--primary-pink); 
            padding: 10px 30px; 
            border-radius: 50px;
            background: rgba(255, 77, 109, 0.1);
            box-shadow: 0 0 15px rgba(255, 77, 109, 0.4);
            transition: all 0.5s ease;
        }

        /* --- THE GAME SECTION --- */
        .game-container {
            margin: 50px auto;
            max-width: 600px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid var(--primary-pink);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
            z-index: 2;
        }
        canvas {
            background: linear-gradient(to bottom, #2b0a16, #4a192c); 
            border-radius: 10px;
            width: 100%;
            max-width: 500px;
            touch-action: none;
            border-bottom: 4px solid var(--primary-pink); 
        }
        .game-ui { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
        .btn {
            background: var(--primary-pink); border: none; color: white;
            padding: 10px 20px; border-radius: 50px; cursor: pointer;
            font-size: 1rem; font-weight: bold; transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); }
        .btn-stop { background: #880e4f; }
        .game-instructions { font-size: 0.9rem; color: var(--soft-pink); margin-top: 10px; }

        /* --- BLOG / CHAT SECTIONS --- */
        .section { padding: 60px 20px; max-width: 800px; margin: auto; position: relative; z-index: 2; }
        
        .blog-post {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: left;
            border-left: 4px solid var(--primary-pink);
            position: relative;
            backdrop-filter: blur(5px);
        }
        .blog-date {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 0.8rem;
            color: var(--soft-pink);
            background: rgba(255, 77, 109, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
        }
        h2 { color: var(--soft-pink); border-bottom: 1px solid var(--primary-pink); display: inline-block; padding-bottom: 10px; }
        h3 { color: white; margin-top: 0; }
        p { line-height: 1.8; font-size: 1.1rem; color: #ffdee6; }

        /* Chat Box */
        .chat-box {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--primary-pink);
            backdrop-filter: blur(5px);
        }
        input, textarea {
            width: 90%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 1px solid var(--primary-pink);
            background: #1a050a;
            color: white;
            font-family: inherit;
        }
        input:focus, textarea:focus { outline: none; box-shadow: 0 0 10px var(--primary-pink); }
        
        /* --- ANIMATIONS --- */
        /* Gentle background sparkles */
        .heart { position: fixed; color: var(--primary-pink); pointer-events: none; z-index: 1; animation: floatUp linear forwards; opacity: 0.6; }
        @keyframes floatUp { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 20% { opacity: 0.6; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }
        
        /* Snowing Stars (Top Layer) */
        .snow-star { 
            position: fixed; 
            top: -10px; 
            color: white; 
            pointer-events: none; 
            z-index: 9999; 
            animation: fallDown linear forwards; 
        }
        @keyframes fallDown {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        footer { padding: 50px; opacity: 0.6; font-size: 0.9rem; position: relative; z-index: 2;}
    </style>
</head>
<body>

    <div class="hero">
        <h1 id="mainTitle">Happy Birthday, Dasini!</h1>
        <p>A space on the internet that stays forever, just like us.</p>
        <div class="countdown" id="timer">Calculating...</div>
    </div>

    <div class="section">
        <h2>Collect My Love</h2>
        <div class="game-container">
            <canvas id="gameCanvas" width="600" height="300"></canvas>
            <div class="game-instructions">
                Avoid the Cacti üåµ<br>
                Tap 1x for Low Hearts ‚ù§Ô∏è | Tap 2x for High Hearts üíñ
            </div>
            <div class="game-ui">
                <button class="btn" onclick="startGame()">‚ñ∂ Start / Restart</button>
                <button class="btn btn-stop" onclick="pauseGame()">‚è∏ Pause</button>
            </div>
            <h3 id="scoreDisplay">Love Collected: 0</h3>
        </div>
    </div>

    <div class="section">
        <h2>The Love Log (Blog)</h2>
        
        <div class="blog-post">
            <span class="blog-date">Jul 28, 2025</span>
            <h3>‚ù§Ô∏è Chapter 1: The Beginning</h3>
            <p>
                This is our first entry. Do you remember the day we met at the library after one exam day? 
                I wanted to create this digital diary so that even when we are far apart, 
                our memories live here together.
            </p>
        </div>

        <div class="blog-post">
            <span class="blog-date">Jan 01, 2025</span>
            <h3>üíå My Wish for You</h3>
            <p>
                For this year, I wish you nothing but happiness and success. 
                No matter how hard things get, remember that you have me cheering for you always.
            </p>
        </div>
    </div>

    <div class="section">
        <h2>Send Me a Note</h2>
        <div class="chat-box">
            <p>Write something here, and it will be sent directly to my email.(There is no spaces so use the undersocre fo spaces)</p>
            <form action="https://formspree.io/f/xqekwlbr" method="POST">
                <input type="text" name="name" placeholder="Your Name" required>
                <textarea name="message" rows="5" placeholder="Write a message to me..." required></textarea>
                <button type="submit" class="btn">Send Message üíå</button>
            </form>
        </div>
    </div>

    <div class="section">
        <h2>Our Memories</h2>
        <div class="photo-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; position: relative; z-index: 2;">
            <img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=1000" style="width:100%; border-radius:15px;" alt="Us 1">
            <img src="https://images.unsplash.com/photo-1516589174184-c68526674fd6?q=80&w=1000" style="width:100%; border-radius:15px;" alt="Us 2">
        </div>
    </div>

    <footer>Made with ‚ù§Ô∏è by Nithika Ranpul</footer>

    <script>
        // --- DATES CONFIGURATION ---
        const jan01 = new Date("January 1, 2026 00:00:00").getTime(); 
        const jan02 = new Date("January 2, 2026 00:00:00").getTime();
        
        // --- 1. DYNAMIC TEXT LOGIC (Timer/Titles) ---
        const timerInterval = setInterval(() => {
            const now = new Date().getTime();
            
            // LOGIC: AFTER JAN 02 (The "Forever" Mode)
            if (now >= jan02) {
                document.getElementById("mainTitle").innerHTML = "To my love, Dasini";
                document.getElementById("timer").innerHTML = "Forever & Always üåπ";
                document.getElementById("timer").style.borderColor = "var(--primary-pink)";
            }
            // LOGIC: ON BIRTHDAY (JAN 01)
            else if (now >= jan01) {
                document.getElementById("mainTitle").innerHTML = "Happy Birthday, Dasini!";
                document.getElementById("timer").innerHTML = "HAPPY BIRTHDAY! üíñ";
                document.getElementById("timer").style.borderColor = "#fff"; 
                document.getElementById("timer").style.boxShadow = "0 0 20px rgba(255,255,255,0.5)";
                document.getElementById("timer").style.background = "rgba(255, 77, 109, 0.4)";
            }
            // LOGIC: BEFORE BIRTHDAY (Countdown)
            else {
                document.getElementById("mainTitle").innerHTML = "Happy Birthday, Dasini!";
                const diff = jan01 - now;
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                document.getElementById("timer").innerHTML = `Next Celebration: ${d}d ${h}h`;
            }
        }, 1000);


        // --- 2. SNOWING STARS (THE INTRO - Every Day) ---
        // Requirement: Always there, but stops after 20 seconds.
        function createSnowStar() {
            const star = document.createElement('div');
            star.classList.add('snow-star');
            star.innerHTML = ['‚ú®', '‚≠ê', '‚ùÑÔ∏è'][Math.floor(Math.random() * 3)];
            star.style.left = Math.random() * 100 + 'vw';
            star.style.fontSize = Math.random() * 20 + 10 + 'px';
            star.style.animationDuration = Math.random() * 3 + 2 + 's'; 
            document.body.appendChild(star);
            setTimeout(() => star.remove(), 5000);
        }

        // Start snow immediately
        let snowInterval = setInterval(createSnowStar, 100);
        
        // STOP snow after 20 seconds (Requirement Match)
        setTimeout(() => { clearInterval(snowInterval); }, 20000);


        // --- 3. BACKGROUND SPARKLES ---
        function createSparkle(type) {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            
            if (type === 'heavy') {
                // Birthday Sparkles (Jan 01 Only)
                // LIGHTER DENSITY so text is readable
                heart.innerHTML = ['‚ú®','üíñ','üå∏'][Math.floor(Math.random()*3)];
                heart.style.fontSize = Math.random() * 20 + 10 + 'px';
                heart.style.animationDuration = Math.random() * 4 + 3 + 's';
                heart.style.opacity = "0.7"; // More transparent
            } else {
                // Normal Background (Always there)
                heart.innerHTML = ['‚ú®','‚≠ê','‚ú®'][Math.floor(Math.random()*3)];
                heart.style.fontSize = Math.random() * 10 + 5 + 'px'; // Smaller
                heart.style.animationDuration = Math.random() * 10 + 10 + 's'; // Very slow
                heart.style.opacity = "0.4"; // Very subtle
            }
            
            heart.style.left = Math.random() * 100 + 'vw';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 15000);
        }

        // Always run gentle sparkles
        setInterval(() => createSparkle('gentle'), 800);

        // CHECK FOR BIRTHDAY SPARKLES (Jan 01 ONLY)
        const nowCheck = new Date().getTime();
        if (nowCheck >= jan01 && nowCheck < jan02) {
            // It is Jan 01! Run heavy sparkles
            let birthdayInterval = setInterval(() => createSparkle('heavy'), 300); // Spawns every 300ms (Not too heavy)
            
            // Stop heavy sparkles after 10 seconds (Requirement Match)
            setTimeout(() => { clearInterval(birthdayInterval); }, 10000);
        }


        // --- 4. HEART BURST (For Game) ---
        function heartBurst() { 
            for(let i=0; i<20; i++) {
                const burst = document.createElement('div');
                burst.classList.add('heart');
                burst.innerHTML = ['‚ú®','üíñ'][Math.floor(Math.random()*2)];
                burst.style.left = Math.random() * 100 + 'vw';
                burst.style.fontSize = Math.random() * 20 + 15 + 'px';
                burst.style.animationDuration = Math.random() * 2 + 3 + 's';
                burst.style.zIndex = "9999";
                document.body.appendChild(burst);
                setTimeout(() => burst.remove(), 5000);
            }
        }

        // --- 5. GAME LOGIC (FIXED SCORING) ---
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        let gameRunning = false, isPaused = false, score = 0, animationId;
        const GROUND_Y = 220; 
        let player = { x: 50, y: GROUND_Y, width: 40, height: 40, dy: 0, jumpPower: -10, doubleJumpPower: -12, gravity: 0.6, grounded: true, jumpCount: 0 };
        let obstacles = [], hearts = [], frame = 0;

        function updateGame() {
            if (!gameRunning || isPaused) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            player.dy += player.gravity; player.y += player.dy;
            if (player.y > GROUND_Y) { player.y = GROUND_Y; player.dy = 0; player.grounded = true; player.jumpCount = 0; }
            
            if (frame % 90 === 0) {
                if (Math.random() < 0.3) obstacles.push({ x: canvas.width, y: GROUND_Y + 10, width: 20, height: 30 });
                else hearts.push({ x: canvas.width, y: [GROUND_Y + 10, 140, 60][Math.floor(Math.random()*3)], width: 30, height: 30 });
            }

            ctx.font = "40px Arial"; ctx.fillText("üê∞", player.x, player.y + 40);
            
            // LOOP BACKWARDS TO FIX SCORING BUG
            ctx.font = "30px Arial";
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let obs = obstacles[i];
                obs.x -= 5;
                ctx.fillText("üåµ", obs.x, obs.y + 30);
                
                // Collision
                if (player.x < obs.x + obs.width && player.x + 30 > obs.x && player.y + 30 > obs.y) {
                    gameOver();
                }
                // Remove if off screen
                if (obs.x + obs.width < 0) {
                    obstacles.splice(i, 1);
                }
            }

            for (let i = hearts.length - 1; i >= 0; i--) {
                let h = hearts[i];
                h.x -= 5; 
                ctx.fillText("üíñ", h.x, h.y + 30);
                
                // CHECK COLLISION (Collect Heart)
                if (player.x < h.x + h.width && player.x + 30 > h.x && player.y + 30 > h.y) {
                    hearts.splice(i, 1); // Remove heart
                    score += 1; // FIX: Add 1 point
                    document.getElementById("scoreDisplay").innerText = "Love Collected: " + score;
                } 
                // Remove if off screen (Missed Heart)
                else if (h.x + h.width < 0) {
                    hearts.splice(i, 1);
                }
            }

            frame++; animationId = requestAnimationFrame(updateGame);
        }

        function jump() {
            if (!gameRunning) return;
            if (player.grounded) { player.dy = player.jumpPower; player.grounded = false; player.jumpCount = 1; }
            else if (player.jumpCount === 1) { player.dy = player.doubleJumpPower; player.jumpCount = 2; }
        }

        function startGame() {
            if (gameRunning && !isPaused) return;
            if (isPaused) { isPaused = false; updateGame(); return; }
            player.y = GROUND_Y; obstacles = []; hearts = []; score = 0; frame = 0;
            gameRunning = true; isPaused = false; document.getElementById("scoreDisplay").innerText = "Love Collected: 0";
            updateGame();
        }

        function pauseGame() {
            if (!gameRunning) return; isPaused = true; heartBurst();
            ctx.fillStyle = "rgba(43, 10, 22, 0.8)"; ctx.fillRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "#ffb3c1"; ctx.font = "bold 30px Arial"; ctx.fillText("Paused ‚è∏", canvas.width/2 - 60, canvas.height/2);
        }

        function gameOver() {
            gameRunning = false; cancelAnimationFrame(animationId); heartBurst();
            ctx.fillStyle = "rgba(43, 10, 22, 0.9)"; ctx.fillRect(0,0,canvas.width, canvas.height);
            ctx.textAlign = "center";
            ctx.fillStyle = "#ff4d6d"; ctx.font = "bold 26px Arial"; ctx.fillText("Game Over, My Love! üíñ", canvas.width/2, canvas.height/2 - 30);
            ctx.fillStyle = "#fff0f3"; ctx.font = "20px Arial"; ctx.fillText("You collected " + score + " hearts!", canvas.width/2, canvas.height/2 + 10);
            ctx.textAlign = "start";
        }

        document.addEventListener("keydown", (e) => { if (e.code === "Space") { e.preventDefault(); jump(); } });
        canvas.addEventListener("touchstart", (e) => { e.preventDefault(); jump(); });
    </script>
</body>
</html>
